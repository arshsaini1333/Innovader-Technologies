(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4881],{52686:function(r,c,p){"use strict";p.d(c,{Z:function(){return I}});var y=p(94184),C=p.n(y),w=p(67294),E=p(76792),x=p(85893);let P=w.forwardRef(({className:r,bsPrefix:c,as:p="div",...y},w)=>(c=(0,E.vE)(c,"card-body"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));P.displayName="CardBody";let S=w.forwardRef(({className:r,bsPrefix:c,as:p="div",...y},w)=>(c=(0,E.vE)(c,"card-footer"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));S.displayName="CardFooter";var T=p(49059);let O=w.forwardRef(({bsPrefix:r,className:c,as:p="div",...y},P)=>{let S=(0,E.vE)(r,"card-header"),O=(0,w.useMemo)(()=>({cardHeaderBsPrefix:S}),[S]);return(0,x.jsx)(T.Z.Provider,{value:O,children:(0,x.jsx)(p,{ref:P,...y,className:C()(c,S)})})});O.displayName="CardHeader";let k=w.forwardRef(({bsPrefix:r,className:c,variant:p,as:y="img",...w},P)=>{let S=(0,E.vE)(r,"card-img");return(0,x.jsx)(y,{ref:P,className:C()(p?`${S}-${p}`:S,c),...w})});k.displayName="CardImg";let M=w.forwardRef(({className:r,bsPrefix:c,as:p="div",...y},w)=>(c=(0,E.vE)(c,"card-img-overlay"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));M.displayName="CardImgOverlay";let R=w.forwardRef(({className:r,bsPrefix:c,as:p="a",...y},w)=>(c=(0,E.vE)(c,"card-link"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));R.displayName="CardLink";var D=p(39602);let N=(0,D.Z)("h6"),j=w.forwardRef(({className:r,bsPrefix:c,as:p=N,...y},w)=>(c=(0,E.vE)(c,"card-subtitle"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));j.displayName="CardSubtitle";let A=w.forwardRef(({className:r,bsPrefix:c,as:p="p",...y},w)=>(c=(0,E.vE)(c,"card-text"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));A.displayName="CardText";let L=(0,D.Z)("h5"),W=w.forwardRef(({className:r,bsPrefix:c,as:p=L,...y},w)=>(c=(0,E.vE)(c,"card-title"),(0,x.jsx)(p,{ref:w,className:C()(r,c),...y})));W.displayName="CardTitle";let _=w.forwardRef(({bsPrefix:r,className:c,bg:p,text:y,border:w,body:S=!1,children:T,as:O="div",...k},M)=>{let R=(0,E.vE)(r,"card");return(0,x.jsx)(O,{ref:M,...k,className:C()(c,R,p&&`bg-${p}`,y&&`text-${y}`,w&&`border-${w}`),children:S?(0,x.jsx)(P,{children:T}):T})});_.displayName="Card";var I=Object.assign(_,{Img:k,Title:W,Subtitle:j,Body:P,Link:R,Text:A,Header:O,Footer:S,ImgOverlay:M})},29080:function(r,c,p){"use strict";p.d(c,{Z:function(){return $}});var y=p(45697),C=p.n(y),w=p(67294),E=p(97121),x=p(16769),P=p(76626),S=p(87126),T=p(77514),O=p(85893);let k=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],M=["activeKey","getControlledId","getControllerId"],R=["as"];function _objectWithoutPropertiesLoose(r,c){if(null==r)return{};var p,y,C={},w=Object.keys(r);for(y=0;y<w.length;y++)p=w[y],c.indexOf(p)>=0||(C[p]=r[p]);return C}function useTabPanel(r){let{active:c,eventKey:p,mountOnEnter:y,transition:C,unmountOnExit:E,role:x="tabpanel",onEnter:T,onEntering:O,onEntered:R,onExit:D,onExiting:N,onExited:j}=r,A=_objectWithoutPropertiesLoose(r,k),L=(0,w.useContext)(P.Z);if(!L)return[Object.assign({},A,{role:x}),{eventKey:p,isActive:c,mountOnEnter:y,transition:C,unmountOnExit:E,onEnter:T,onEntering:O,onEntered:R,onExit:D,onExiting:N,onExited:j}];let{activeKey:W,getControlledId:_,getControllerId:I}=L,$=_objectWithoutPropertiesLoose(L,M),B=(0,S.h)(p);return[Object.assign({},A,{role:x,id:_(p),"aria-labelledby":I(p)}),{eventKey:p,isActive:null==c&&null!=B?(0,S.h)(W)===B:c,transition:C||$.transition,mountOnEnter:null!=y?y:$.mountOnEnter,unmountOnExit:null!=E?E:$.unmountOnExit,onEnter:T,onEntering:O,onEntered:R,onExit:D,onExiting:N,onExited:j}]}let D=w.forwardRef((r,c)=>{let{as:p="div"}=r,y=_objectWithoutPropertiesLoose(r,R),[C,{isActive:w,onEnter:E,onEntering:x,onEntered:k,onExit:M,onExiting:D,onExited:N,mountOnEnter:j,unmountOnExit:A,transition:L=T.Z}]=useTabPanel(y);return(0,O.jsx)(P.Z.Provider,{value:null,children:(0,O.jsx)(S.Z.Provider,{value:null,children:(0,O.jsx)(L,{in:w,onEnter:E,onEntering:x,onEntered:k,onExit:M,onExiting:D,onExited:N,mountOnEnter:j,unmountOnExit:A,children:(0,O.jsx)(p,Object.assign({},C,{ref:c,hidden:!w,"aria-hidden":!w}))})})})});D.displayName="TabPanel";let Tabs=r=>{let{id:c,generateChildId:p,onSelect:y,activeKey:C,defaultActiveKey:T,transition:k,mountOnEnter:M,unmountOnExit:R,children:D}=r,[N,j]=(0,E.$c)(C,T,y),A=(0,x.gP)(c),L=(0,w.useMemo)(()=>p||((r,c)=>A?`${A}-${c}-${r}`:null),[A,p]),W=(0,w.useMemo)(()=>({onSelect:j,activeKey:N,transition:k,mountOnEnter:M||!1,unmountOnExit:R||!1,getControlledId:r=>L(r,"tabpane"),getControllerId:r=>L(r,"tab")}),[j,N,k,M,R,L]);return(0,O.jsx)(P.Z.Provider,{value:W,children:(0,O.jsx)(S.Z.Provider,{value:j||null,children:D})})};Tabs.Panel=D;var N=p(41068);function getTabTransitionComponent(r){return"boolean"==typeof r?r?N.Z:T.Z:r}let TabContainer=({transition:r,...c})=>(0,O.jsx)(Tabs,{...c,transition:getTabTransitionComponent(r)});TabContainer.displayName="TabContainer";var j=p(94184),A=p.n(j),L=p(76792);let W=w.forwardRef(({className:r,bsPrefix:c,as:p="div",...y},C)=>(c=(0,L.vE)(c,"tab-content"),(0,O.jsx)(p,{ref:C,className:A()(r,c),...y})));W.displayName="TabContent";let _=w.forwardRef(({bsPrefix:r,transition:c,...p},y)=>{let[{className:C,as:w="div",...E},{isActive:x,onEnter:T,onEntering:k,onEntered:M,onExit:R,onExiting:D,onExited:j,mountOnEnter:W,unmountOnExit:_,transition:I=N.Z}]=useTabPanel({...p,transition:getTabTransitionComponent(c)}),$=(0,L.vE)(r,"tab-pane");return(0,O.jsx)(P.Z.Provider,{value:null,children:(0,O.jsx)(S.Z.Provider,{value:null,children:(0,O.jsx)(I,{in:x,onEnter:T,onEntering:k,onEntered:M,onExit:R,onExiting:D,onExited:j,mountOnEnter:W,unmountOnExit:_,children:(0,O.jsx)(w,{...E,ref:y,className:A()(C,$,x&&"active")})})})})});_.displayName="TabPane";let I={eventKey:C().oneOfType([C().string,C().number]),title:C().node.isRequired,disabled:C().bool,tabClassName:C().string,tabAttrs:C().object},Tab=()=>{throw Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Tab.propTypes=I;var $=Object.assign(Tab,{Container:TabContainer,Content:W,Pane:_})},97005:function(r,c,p){var y=p(67294),C=y&&"object"==typeof y&&"default"in y?y:{default:y};!function(r){if(!r||"undefined"==typeof window)return;let c=document.createElement("style");c.setAttribute("type","text/css"),c.innerHTML=r,document.head.appendChild(c)}('.rfm-marquee-container {\n  overflow-x: hidden;\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  width: var(--width);\n  transform: var(--transform);\n}\n.rfm-marquee-container:hover div {\n  animation-play-state: var(--pause-on-hover);\n}\n.rfm-marquee-container:active div {\n  animation-play-state: var(--pause-on-click);\n}\n\n.rfm-overlay {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.rfm-overlay::before, .rfm-overlay::after {\n  background: linear-gradient(to right, var(--gradient-color), rgba(255, 255, 255, 0));\n  content: "";\n  height: 100%;\n  position: absolute;\n  width: var(--gradient-width);\n  z-index: 2;\n  pointer-events: none;\n  touch-action: none;\n}\n.rfm-overlay::after {\n  right: 0;\n  top: 0;\n  transform: rotateZ(180deg);\n}\n.rfm-overlay::before {\n  left: 0;\n  top: 0;\n}\n\n.rfm-marquee {\n  flex: 0 0 auto;\n  min-width: var(--min-width);\n  z-index: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);\n  animation-play-state: var(--play);\n  animation-delay: var(--delay);\n  animation-direction: var(--direction);\n}\n@keyframes scroll {\n  0% {\n    transform: translateX(0%);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n}\n\n.rfm-initial-child-container {\n  flex: 0 0 auto;\n  display: flex;\n  min-width: auto;\n  flex-direction: row;\n  align-items: center;\n}\n\n.rfm-child {\n  transform: var(--transform);\n}');let w=y.forwardRef(function({style:r={},className:c="",autoFill:p=!1,play:w=!0,pauseOnHover:E=!1,pauseOnClick:x=!1,direction:P="left",speed:S=50,delay:T=0,loop:O=0,gradient:k=!1,gradientColor:M="white",gradientWidth:R=200,onFinish:D,onCycleComplete:N,onMount:j,children:A},L){let[W,_]=y.useState(0),[I,$]=y.useState(0),[B,q]=y.useState(1),[z,F]=y.useState(!1),H=y.useRef(null),Z=L||H,X=y.useRef(null),V=y.useCallback(()=>{if(X.current&&Z.current){let r=Z.current.getBoundingClientRect(),c=X.current.getBoundingClientRect(),y=r.width,C=c.width;("up"===P||"down"===P)&&(y=r.height,C=c.height),p&&y&&C?q(C<y?Math.ceil(y/C):1):q(1),_(y),$(C)}},[p,Z,P]);y.useEffect(()=>{if(z&&(V(),X.current&&Z.current)){let r=new ResizeObserver(()=>V());return r.observe(Z.current),r.observe(X.current),()=>{r&&r.disconnect()}}},[V,Z,z]),y.useEffect(()=>{V()},[V,A]),y.useEffect(()=>{F(!0)},[]),y.useEffect(()=>{"function"==typeof j&&j()},[]);let U=y.useMemo(()=>p?I*B/S:I<W?W/S:I/S,[p,W,I,B,S]),G=y.useMemo(()=>Object.assign(Object.assign({},r),{"--pause-on-hover":!w||E?"paused":"running","--pause-on-click":!w||E&&!x||x?"paused":"running","--width":"up"===P||"down"===P?"100vh":"100%","--transform":"up"===P?"rotate(-90deg)":"down"===P?"rotate(90deg)":"none"}),[r,w,E,x,P]),K=y.useMemo(()=>({"--gradient-color":M,"--gradient-width":"number"==typeof R?`${R}px`:R}),[M,R]),Y=y.useMemo(()=>({"--play":w?"running":"paused","--direction":"left"===P?"normal":"reverse","--duration":`${U}s`,"--delay":`${T}s`,"--iteration-count":O?`${O}`:"infinite","--min-width":p?"auto":"100%"}),[w,P,U,T,O,p]),J=y.useMemo(()=>({"--transform":"up"===P?"rotate(90deg)":"down"===P?"rotate(-90deg)":"none"}),[P]),Q=y.useCallback(r=>[...Array(Number.isFinite(r)&&r>=0?r:0)].map((r,c)=>C.default.createElement(y.Fragment,{key:c},y.Children.map(A,r=>C.default.createElement("div",{style:J,className:"rfm-child"},r)))),[J,A]);return z?C.default.createElement("div",{ref:Z,style:G,className:"rfm-marquee-container "+c},k&&C.default.createElement("div",{style:K,className:"rfm-overlay"}),C.default.createElement("div",{className:"rfm-marquee",style:Y,onAnimationIteration:N,onAnimationEnd:D},C.default.createElement("div",{className:"rfm-initial-child-container",ref:X},y.Children.map(A,r=>C.default.createElement("div",{style:J,className:"rfm-child"},r))),Q(B-1)),C.default.createElement("div",{className:"rfm-marquee",style:Y},Q(B))):null});c.Z=w},40827:function(r,c,p){"use strict";var y=p(67294);function _extends(){return(_extends=Object.assign||function(r){for(var c=1;c<arguments.length;c++){var p=arguments[c];for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(r[y]=p[y])}return r}).apply(this,arguments)}function ownKeys(r,c){var p=Object.keys(r);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(r);c&&(y=y.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),p.push.apply(p,y)}return p}function _objectSpread(r){for(var c=1;c<arguments.length;c++){var p=null!=arguments[c]?arguments[c]:{};c%2?ownKeys(Object(p),!0).forEach(function(c){var y;y=p[c],c in r?Object.defineProperty(r,c,{value:y,enumerable:!0,configurable:!0,writable:!0}):r[c]=y}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(p)):ownKeys(Object(p)).forEach(function(c){Object.defineProperty(r,c,Object.getOwnPropertyDescriptor(p,c))})}return r}let Masonry=class Masonry extends y.Component{constructor(r){let c;super(r),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this),c=this.props.breakpointCols&&this.props.breakpointCols.default?this.props.breakpointCols.default:parseInt(this.props.breakpointCols)||2,this.state={columnCount:c}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){let r=window&&window.innerWidth||1/0,c=this.props.breakpointCols;"object"!=typeof c&&(c={default:parseInt(c)||2});let p=1/0,y=c.default||2;for(let C in c){let w=parseInt(C),E=w>0&&r<=w;E&&w<p&&(p=w,y=c[C])}y=Math.max(1,parseInt(y)||1),this.state.columnCount!==y&&this.setState({columnCount:y})}itemsInColumns(){let r=this.state.columnCount,c=Array(r),p=y.Children.toArray(this.props.children);for(let y=0;y<p.length;y++){let C=y%r;c[C]||(c[C]=[]),c[C].push(p[y])}return c}renderColumns(){let{column:r,columnAttrs:c={},columnClassName:p}=this.props,C=this.itemsInColumns(),w=`${100/C.length}%`,E=p;E&&"string"!=typeof E&&(this.logDeprecated('The property "columnClassName" requires a string'),void 0===E&&(E="my-masonry-grid_column"));let x=_objectSpread(_objectSpread(_objectSpread({},r),c),{},{style:_objectSpread(_objectSpread({},c.style),{},{width:w}),className:E});return C.map((r,c)=>y.createElement("div",_extends({},x,{key:c}),r))}logDeprecated(r){console.error("[Masonry]",r)}render(){let r=this.props,{children:c,breakpointCols:p,columnClassName:C,columnAttrs:w,column:E,className:x}=r,P=function(r,c){if(null==r)return{};var p,y,C=function(r,c){if(null==r)return{};var p,y,C={},w=Object.keys(r);for(y=0;y<w.length;y++)p=w[y],c.indexOf(p)>=0||(C[p]=r[p]);return C}(r,c);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(r);for(y=0;y<w.length;y++)p=w[y],!(c.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(r,p)&&(C[p]=r[p])}return C}(r,["children","breakpointCols","columnClassName","columnAttrs","column","className"]),S=x;return"string"!=typeof x&&(this.logDeprecated('The property "className" requires a string'),void 0===x&&(S="my-masonry-grid")),y.createElement("div",_extends({},P,{className:S}),this.renderColumns())}};Masonry.defaultProps={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},c.Z=Masonry},37301:function(r,c,p){"use strict";p.d(c,{I:function(){return resolveElements}});var y=p(45487);function resolveElements(r,c,p){var C;if("string"==typeof r){let w=document;c&&((0,y.k)(!!c.current,"Scope provided, but no element detected."),w=c.current),p?(null!==(C=p[r])&&void 0!==C||(p[r]=w.querySelectorAll(r)),r=p[r]):r=w.querySelectorAll(r)}else r instanceof Element&&(r=[r]);return Array.from(r||[])}},16893:function(r,c,p){"use strict";p.d(c,{Y:function(){return useInView}});var y=p(67294),C=p(37301);let w={some:0,all:1};function useInView(r,{root:c,margin:p,amount:E,once:x=!1}={}){let[P,S]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{if(!r.current||x&&P)return;let y={root:c&&c.current||void 0,margin:p,amount:E};return function(r,c,{root:p,margin:y,amount:E="some"}={}){let x=(0,C.I)(r),P=new WeakMap,S=new IntersectionObserver(r=>{r.forEach(r=>{let p=P.get(r.target);if(!!p!==r.isIntersecting){if(r.isIntersecting){let p=c(r);"function"==typeof p?P.set(r.target,p):S.unobserve(r.target)}else p&&(p(r),P.delete(r.target))}})},{root:p,rootMargin:y,threshold:"number"==typeof E?E:w[E]});return x.forEach(r=>S.observe(r)),()=>S.disconnect()}(r.current,()=>(S(!0),x?void 0:()=>S(!1)),y)},[c,r,p,x,E]),P}},70717:function(r,c,p){"use strict";function t(r,c,p,y){return new(p||(p=Promise))(function(C,w){function o(r){try{h(y.next(r))}catch(r){w(r)}}function a(r){try{h(y.throw(r))}catch(r){w(r)}}function h(r){var c;r.done?C(r.value):((c=r.value)instanceof p?c:new p(function(r){r(c)})).then(o,a)}h((y=y.apply(r,c||[])).next())})}p.d(c,{Z:function(){return u}}),"function"==typeof SuppressedError&&SuppressedError;let e=class e{constructor(){this.listeners={}}on(r,c,p){if(this.listeners[r]||(this.listeners[r]=new Set),this.listeners[r].add(c),null==p?void 0:p.once){let i=()=>{this.un(r,i),this.un(r,c)};return this.on(r,i),i}return()=>this.un(r,c)}un(r,c){var p;null===(p=this.listeners[r])||void 0===p||p.delete(c)}once(r,c){return this.on(r,c,{once:!0})}unAll(){this.listeners={}}emit(r,...c){this.listeners[r]&&this.listeners[r].forEach(r=>r(...c))}};let y={decode:function(r,c){return t(this,void 0,void 0,function*(){let p=new AudioContext({sampleRate:c});return p.decodeAudioData(r).finally(()=>p.close())})},createBuffer:function(r,c){return"number"==typeof r[0]&&(r=[r]),function(r){let c=r[0];if(c.some(r=>r>1||r<-1)){let p=c.length,y=0;for(let r=0;r<p;r++){let p=Math.abs(c[r]);p>y&&(y=p)}for(let c of r)for(let r=0;r<p;r++)c[r]/=y}}(r),{duration:c,length:r[0].length,sampleRate:r[0].length/c,numberOfChannels:r.length,getChannelData:c=>null==r?void 0:r[c],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function n(r,c,p){let y=function s(r,c){let p=c.xmlns?document.createElementNS(c.xmlns,r):document.createElement(r);for(let[r,y]of Object.entries(c))if("children"===r)for(let[r,y]of Object.entries(c))"string"==typeof y?p.appendChild(document.createTextNode(y)):p.appendChild(s(r,y));else"style"===r?Object.assign(p.style,y):"textContent"===r?p.textContent=y:p.setAttribute(r,y.toString());return p}(r,c||{});return null==p||p.appendChild(y),y}var C=Object.freeze({__proto__:null,createElement:n,default:n});let w={fetchBlob:function(r,c,p){return t(this,void 0,void 0,function*(){let y=yield fetch(r,p);if(y.status>=400)throw Error(`Failed to fetch ${r}: ${y.status} (${y.statusText})`);return function(r,c){t(this,void 0,void 0,function*(){if(!r.body||!r.headers)return;let p=r.body.getReader(),y=Number(r.headers.get("Content-Length"))||0,C=0,o=r=>t(this,void 0,void 0,function*(){C+=(null==r?void 0:r.length)||0;let p=Math.round(C/y*100);c(p)}),a=()=>t(this,void 0,void 0,function*(){let r;try{r=yield p.read()}catch(r){return}r.done||(o(r.value),yield a())});a()})}(y.clone(),c),y.blob()})}};let a=class a extends e{constructor(r){super(),this.isExternalMedia=!1,r.media?(this.media=r.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),r.mediaControls&&(this.media.controls=!0),r.autoplay&&(this.media.autoplay=!0),null!=r.playbackRate&&this.onMediaEvent("canplay",()=>{null!=r.playbackRate&&(this.media.playbackRate=r.playbackRate)},{once:!0})}onMediaEvent(r,c,p){return this.media.addEventListener(r,c,p),()=>this.media.removeEventListener(r,c,p)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){let r=this.getSrc();r.startsWith("blob:")&&URL.revokeObjectURL(r)}canPlayType(r){return""!==this.media.canPlayType(r)}setSrc(r,c){let p=this.getSrc();if(r&&p===r)return;this.revokeSrc();let y=c instanceof Blob&&(this.canPlayType(c.type)||!r)?URL.createObjectURL(c):r;p&&(this.media.src="");try{this.media.src=y}catch(c){this.media.src=r}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(r){this.media=r}play(){return t(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(r){this.media.currentTime=Math.max(0,Math.min(r,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(r){this.media.volume=r}getMuted(){return this.media.muted}setMuted(r){this.media.muted=r}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(r,c){null!=c&&(this.media.preservesPitch=c),this.media.playbackRate=r}getMediaElement(){return this.media}setSinkId(r){return this.media.setSinkId(r)}};let h=class h extends e{constructor(r,c){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=r;let p=this.parentFromOptionsContainer(r.container);this.parent=p;let[y,C]=this.initHtml();p.appendChild(y),this.container=y,this.scrollContainer=C.querySelector(".scroll"),this.wrapper=C.querySelector(".wrapper"),this.canvasWrapper=C.querySelector(".canvases"),this.progressWrapper=C.querySelector(".progress"),this.cursor=C.querySelector(".cursor"),c&&C.appendChild(c),this.initEvents()}parentFromOptionsContainer(r){let c;if("string"==typeof r?c=document.querySelector(r):r instanceof HTMLElement&&(c=r),!c)throw Error("Container not found");return c}initEvents(){let t=r=>{let c=this.wrapper.getBoundingClientRect(),p=r.clientX-c.left,y=r.clientY-c.top;return[p/c.width,y/c.height]};if(this.wrapper.addEventListener("click",r=>{let[c,p]=t(r);this.emit("click",c,p)}),this.wrapper.addEventListener("dblclick",r=>{let[c,p]=t(r);this.emit("dblclick",c,p)}),!0!==this.options.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{let{scrollLeft:r,scrollWidth:c,clientWidth:p}=this.scrollContainer,y=r/c,C=(r+p)/c;this.emit("scroll",y,C,r,r+p)}),"function"==typeof ResizeObserver){let r=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{r().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){let r=this.parent.clientWidth;r===this.lastContainerWidth&&"auto"!==this.options.height||(this.lastContainerWidth=r,this.reRender())}initDrag(){this.subscriptions.push(function(r,c,p,y,C=3,w=0,E=100){if(!r)return()=>{};let x=matchMedia("(pointer: coarse)").matches,h=()=>{},l=P=>{if(P.button!==w)return;P.preventDefault(),P.stopPropagation();let S=P.clientX,T=P.clientY,O=!1,k=Date.now(),m=y=>{if(y.preventDefault(),y.stopPropagation(),x&&Date.now()-k<E)return;let w=y.clientX,P=y.clientY,M=w-S,R=P-T;if(O||Math.abs(M)>C||Math.abs(R)>C){let y=r.getBoundingClientRect(),{left:C,top:E}=y;O||(null==p||p(S-C,T-E),O=!0),c(M,R,w-C,P-E),S=w,T=P}},f=c=>{if(O){let p=c.clientX,C=c.clientY,w=r.getBoundingClientRect(),{left:E,top:x}=w;null==y||y(p-E,C-x)}h()},g=r=>{r.relatedTarget&&r.relatedTarget!==document.documentElement||f(r)},v=r=>{O&&(r.stopPropagation(),r.preventDefault())},b=r=>{O&&r.preventDefault()};document.addEventListener("pointermove",m),document.addEventListener("pointerup",f),document.addEventListener("pointerout",g),document.addEventListener("pointercancel",g),document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("click",v,{capture:!0}),h=()=>{document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",f),document.removeEventListener("pointerout",g),document.removeEventListener("pointercancel",g),document.removeEventListener("touchmove",b),setTimeout(()=>{document.removeEventListener("click",v,{capture:!0})},10)}};return r.addEventListener("pointerdown",l),()=>{h(),r.removeEventListener("pointerdown",l)}}(this.wrapper,(r,c,p)=>{this.emit("drag",Math.max(0,Math.min(1,p/this.wrapper.getBoundingClientRect().width)))},r=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},r=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))}))}getHeight(r,c){var p;let y=(null===(p=this.audioData)||void 0===p?void 0:p.numberOfChannels)||1;if(null==r)return 128;if(!isNaN(Number(r)))return Number(r);if("auto"===r){let r=this.parent.clientHeight||128;return(null==c?void 0:c.every(r=>!r.overlay))?r/y:r}return 128}initHtml(){let r=document.createElement("div"),c=r.attachShadow({mode:"open"}),p=this.options.cspNonce&&"string"==typeof this.options.cspNonce?this.options.cspNonce.replace(/"/g,""):"";return c.innerHTML=`
      <style${p?` nonce="${p}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[r,c]}setOptions(r){if(this.options.container!==r.container){let c=this.parentFromOptionsContainer(r.container);c.appendChild(this.container),this.parent=c}!0!==r.dragToSeek&&"object"!=typeof this.options.dragToSeek||this.initDrag(),this.options=r,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(r){this.scrollContainer.scrollLeft=r}setScrollPercentage(r){let{scrollWidth:c}=this.scrollContainer;this.setScroll(c*r)}destroy(){var r,c;this.subscriptions.forEach(r=>r()),this.container.remove(),null===(r=this.resizeObserver)||void 0===r||r.disconnect(),null===(c=this.unsubscribeOnScroll)||void 0===c||c.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(r=10){let c,p;let s=()=>{c&&clearTimeout(c),p&&p()};return this.timeouts.push(s),()=>new Promise((y,C)=>{s(),p=C,c=setTimeout(()=>{c=void 0,p=void 0,y()},r)})}convertColorValues(r){if(!Array.isArray(r))return r||"";if(r.length<2)return r[0]||"";let c=document.createElement("canvas"),p=c.getContext("2d"),y=c.height*(window.devicePixelRatio||1),C=p.createLinearGradient(0,0,0,y),w=1/(r.length-1);return r.forEach((r,c)=>{C.addColorStop(c*w,r)}),C}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(r,c,p,y){let C=r[0],w=r[1]||r[0],E=C.length,{width:x,height:P}=p.canvas,S=P/2,T=this.getPixelRatio(),O=c.barWidth?c.barWidth*T:1,k=c.barGap?c.barGap*T:c.barWidth?O/2:0,M=c.barRadius||0,R=x/(O+k)/E,D=M&&"roundRect"in p?"roundRect":"rect";p.beginPath();let N=0,j=0,A=0;for(let r=0;r<=E;r++){let E=Math.round(r*R);if(E>N){let r=Math.round(j*S*y),C=r+Math.round(A*S*y)||1,w=S-r;"top"===c.barAlign?w=0:"bottom"===c.barAlign&&(w=P-C),p[D](N*(O+k),w,O,C,M),N=E,j=0,A=0}let x=Math.abs(C[r]||0),T=Math.abs(w[r]||0);x>j&&(j=x),T>A&&(A=T)}p.fill(),p.closePath()}renderLineWaveform(r,c,p,y){let n=c=>{let C=r[c]||r[0],w=C.length,{height:E}=p.canvas,x=E/2,P=p.canvas.width/w;p.moveTo(0,x);let S=0,T=0;for(let r=0;r<=w;r++){let w=Math.round(r*P);if(w>S){let r=x+(Math.round(T*x*y)||1)*(0===c?-1:1);p.lineTo(S,r),S=w,T=0}let E=Math.abs(C[r]||0);E>T&&(T=E)}p.lineTo(S,x)};p.beginPath(),n(0),n(1),p.fill(),p.closePath()}renderWaveform(r,c,p){if(p.fillStyle=this.convertColorValues(c.waveColor),c.renderFunction)return void c.renderFunction(r,p);let y=c.barHeight||1;if(c.normalize){let c=Array.from(r[0]).reduce((r,c)=>Math.max(r,Math.abs(c)),0);y=c?1/c:1}c.barWidth||c.barGap||c.barAlign?this.renderBarWaveform(r,c,p,y):this.renderLineWaveform(r,c,p,y)}renderSingleCanvas(r,c,p,y,C,w,E){let x=this.getPixelRatio(),P=document.createElement("canvas");P.width=Math.round(p*x),P.height=Math.round(y*x),P.style.width=`${p}px`,P.style.height=`${y}px`,P.style.left=`${Math.round(C)}px`,w.appendChild(P);let S=P.getContext("2d");if(this.renderWaveform(r,c,S),P.width>0&&P.height>0){let r=P.cloneNode(),p=r.getContext("2d");p.drawImage(P,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(c.progressColor),p.fillRect(0,0,P.width,P.height),E.appendChild(r)}}renderMultiCanvas(r,c,p,y,C,w){let E=this.getPixelRatio(),{clientWidth:x}=this.scrollContainer,P=p/E,S=Math.min(h.MAX_CANVAS_WIDTH,x,P),T={};if(0===S)return;if(c.barWidth||c.barGap){let r=c.barWidth||.5,p=r+(c.barGap||r/2);S%p!=0&&(S=Math.floor(S/p)*p)}let u=p=>{if(p<0||p>=O||T[p])return;T[p]=!0;let E=p*S,x=Math.min(P-E,S);if(x<=0)return;let k=r.map(r=>{let c=Math.floor(E/P*r.length),p=Math.floor((E+x)/P*r.length);return r.slice(c,p)});this.renderSingleCanvas(k,c,x,y,E,C,w)},O=Math.ceil(P/S);if(!this.isScrollable){for(let r=0;r<O;r++)u(r);return}let k=this.scrollContainer.scrollLeft/P,M=Math.floor(k*O);if(u(M-1),u(M),u(M+1),O>1){let r=this.on("scroll",()=>{let{scrollLeft:r}=this.scrollContainer,c=Math.floor(r/P*O);Object.keys(T).length>h.MAX_NODES&&(C.innerHTML="",w.innerHTML="",T={}),u(c-1),u(c),u(c+1)});this.unsubscribeOnScroll.push(r)}}renderChannel(r,c,p,y){var{overlay:C}=c,w=function(r,c){var p={};for(var y in r)Object.prototype.hasOwnProperty.call(r,y)&&0>c.indexOf(y)&&(p[y]=r[y]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var C=0;for(y=Object.getOwnPropertySymbols(r);C<y.length;C++)0>c.indexOf(y[C])&&Object.prototype.propertyIsEnumerable.call(r,y[C])&&(p[y[C]]=r[y[C]])}return p}(c,["overlay"]);let E=document.createElement("div"),x=this.getHeight(w.height,w.splitChannels);E.style.height=`${x}px`,C&&y>0&&(E.style.marginTop=`-${x}px`),this.canvasWrapper.style.minHeight=`${x}px`,this.canvasWrapper.appendChild(E);let P=E.cloneNode();this.progressWrapper.appendChild(P),this.renderMultiCanvas(r,w,p,x,E,P)}render(r){return t(this,void 0,void 0,function*(){var c;this.timeouts.forEach(r=>r()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);let p=this.getPixelRatio(),y=this.scrollContainer.clientWidth,C=Math.ceil(r.duration*(this.options.minPxPerSec||0));this.isScrollable=C>y;let w=this.options.fillParent&&!this.isScrollable,E=(w?y:C)*p;if(this.wrapper.style.width=w?"100%":`${C}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=r,this.emit("render"),this.options.splitChannels)for(let p=0;p<r.numberOfChannels;p++){let y=Object.assign(Object.assign({},this.options),null===(c=this.options.splitChannels)||void 0===c?void 0:c[p]);this.renderChannel([r.getChannelData(p)],y,E,p)}else{let c=[r.getChannelData(0)];r.numberOfChannels>1&&c.push(r.getChannelData(1)),this.renderChannel(c,this.options,E,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;let{scrollWidth:r}=this.scrollContainer,{right:c}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&r!==this.scrollContainer.scrollWidth){let{right:r}=this.progressWrapper.getBoundingClientRect(),p=r-c;p*=2,p=(p<0?Math.floor(p):Math.ceil(p))/2,this.scrollContainer.scrollLeft+=p}}zoom(r){this.options.minPxPerSec=r,this.reRender()}scrollIntoView(r,c=!1){let{scrollLeft:p,scrollWidth:y,clientWidth:C}=this.scrollContainer,w=r*y,E=p+C,x=C/2;if(this.isDragging)w+30>E?this.scrollContainer.scrollLeft+=30:w-30<p&&(this.scrollContainer.scrollLeft-=30);else{(w<p||w>E)&&(this.scrollContainer.scrollLeft=w-(this.options.autoCenter?x:0));let r=w-p-x;c&&this.options.autoCenter&&r>0&&(this.scrollContainer.scrollLeft+=Math.min(r,10))}{let r=this.scrollContainer.scrollLeft,c=r/y,p=(r+C)/y;this.emit("scroll",c,p,r,r+C)}}renderProgress(r,c){if(isNaN(r))return;let p=100*r;this.canvasWrapper.style.clipPath=`polygon(${p}% 0, 100% 0, 100% 100%, ${p}% 100%)`,this.progressWrapper.style.width=`${p}%`,this.cursor.style.left=`${p}%`,this.cursor.style.transform=`translateX(-${100===Math.round(p)?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(r,c)}exportImage(r,c,p){return t(this,void 0,void 0,function*(){let y=this.canvasWrapper.querySelectorAll("canvas");if(!y.length)throw Error("No waveform data");if("dataURL"===p){let p=Array.from(y).map(p=>p.toDataURL(r,c));return Promise.resolve(p)}return Promise.all(Array.from(y).map(p=>new Promise((y,C)=>{p.toBlob(r=>{r?y(r):C(Error("Could not export image"))},r,c)})))})}};h.MAX_CANVAS_WIDTH=8e3,h.MAX_NODES=10;let l=class l extends e{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};let d=class d extends e{constructor(r=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=r,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return t(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(r){if(this.currentSrc=r,this._duration=void 0,!r)return this.buffer=null,void this.emit("emptied");fetch(r).then(c=>{if(c.status>=400)throw Error(`Failed to fetch ${r}: ${c.status} (${c.statusText})`);return c.arrayBuffer()}).then(c=>this.currentSrc!==r?null:this.audioContext.decodeAudioData(c)).then(c=>{this.currentSrc===r&&(this.buffer=c,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var r;if(!this.paused)return;this.paused=!1,null===(r=this.bufferNode)||void 0===r||r.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let c=this.playedDuration*this._playbackRate;(c>=this.duration||c<0)&&(c=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,c),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var r;this.paused=!0,null===(r=this.bufferNode)||void 0===r||r.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return t(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(r){let c=r-this.currentTime,p=this.bufferNode;null==p||p.stop(this.audioContext.currentTime+c),null==p||p.addEventListener("ended",()=>{p===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(r){return t(this,void 0,void 0,function*(){return this.audioContext.setSinkId(r)})}get playbackRate(){return this._playbackRate}set playbackRate(r){this._playbackRate=r,this.bufferNode&&(this.bufferNode.playbackRate.value=r)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(r){let c=!this.paused;c&&this._pause(),this.playedDuration=r/this._playbackRate,c&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var r,c;return null!==(r=this._duration)&&void 0!==r?r:(null===(c=this.buffer)||void 0===c?void 0:c.duration)||0}set duration(r){this._duration=r}get volume(){return this.gainNode.gain.value}set volume(r){this.gainNode.gain.value=r,this.emit("volumechange")}get muted(){return this._muted}set muted(r){this._muted!==r&&(this._muted=r,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(r){return/^(audio|video)\//.test(r)}getGainNode(){return this.gainNode}getChannelData(){let r=[];if(!this.buffer)return r;let c=this.buffer.numberOfChannels;for(let p=0;p<c;p++)r.push(this.buffer.getChannelData(p));return r}};let E={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let u=class u extends a{static create(r){return new u(r)}constructor(r){let c=r.media||("WebAudio"===r.backend?new d:void 0);super({media:c,mediaControls:r.mediaControls,autoplay:r.autoplay,playbackRate:r.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},E,r),this.timer=new l;let p=c?void 0:this.getMediaElement();this.renderer=new h(this.options,p),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();let y=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");let{peaks:r,duration:c}=this.options;(y||r&&c)&&this.load(y,r,c).catch(()=>null)})}updateProgress(r=this.getCurrentTime()){return this.renderer.renderProgress(r/this.getDuration(),this.isPlaying()),r}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){let r=this.updateProgress();this.emit("timeupdate",r),this.emit("audioprocess",r),null!=this.stopAtPosition&&this.isPlaying()&&r>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{let r=this.updateProgress();this.emit("timeupdate",r)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var r;this.emit("error",null!==(r=this.getMediaElement().error)&&void 0!==r?r:Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(r,c)=>{this.options.interact&&(this.seekTo(r),this.emit("interaction",r*this.getDuration()),this.emit("click",r,c))}),this.renderer.on("dblclick",(r,c)=>{this.emit("dblclick",r,c)}),this.renderer.on("scroll",(r,c,p,y)=>{let C=this.getDuration();this.emit("scroll",r*C,c*C,p,y)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",r=>{this.emit("dragstart",r)}),this.renderer.on("dragend",r=>{this.emit("dragend",r)}));{let r;this.subscriptions.push(this.renderer.on("drag",c=>{let p;this.options.interact&&(this.renderer.renderProgress(c),clearTimeout(r),this.isPlaying()?p=0:!0===this.options.dragToSeek?p=200:"object"==typeof this.options.dragToSeek&&void 0!==this.options.dragToSeek&&(p=this.options.dragToSeek.debounceTime),r=setTimeout(()=>{this.seekTo(c)},p),this.emit("interaction",c*this.getDuration()),this.emit("drag",c))}))}}initPlugins(){var r;(null===(r=this.options.plugins)||void 0===r?void 0:r.length)&&this.options.plugins.forEach(r=>{this.registerPlugin(r)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(r=>r()),this.mediaSubscriptions=[]}setOptions(r){this.options=Object.assign({},this.options,r),r.duration&&!r.peaks&&(this.decodedData=y.createBuffer(this.exportPeaks(),r.duration)),r.peaks&&r.duration&&(this.decodedData=y.createBuffer(r.peaks,r.duration)),this.renderer.setOptions(this.options),r.audioRate&&this.setPlaybackRate(r.audioRate),null!=r.mediaControls&&(this.getMediaElement().controls=r.mediaControls)}registerPlugin(r){return r._init(this),this.plugins.push(r),this.subscriptions.push(r.once("destroy",()=>{this.plugins=this.plugins.filter(c=>c!==r)})),r}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(r){return this.renderer.setScroll(r)}setScrollTime(r){let c=r/this.getDuration();this.renderer.setScrollPercentage(c)}getActivePlugins(){return this.plugins}loadAudio(r,c,p,C){return t(this,void 0,void 0,function*(){var E;if(this.emit("load",r),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!c&&!p){let p=this.options.fetchParams||{};window.AbortController&&!p.signal&&(this.abortController=new AbortController,p.signal=null===(E=this.abortController)||void 0===E?void 0:E.signal),c=yield w.fetchBlob(r,r=>this.emit("loading",r),p);let y=this.options.blobMimeType;y&&(c=new Blob([c],{type:y}))}this.setSrc(r,c);let x=yield new Promise(r=>{let c=C||this.getDuration();c?r(c):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>r(this.getDuration()),{once:!0}))});if(!r&&!c){let r=this.getMediaElement();r instanceof d&&(r.duration=x)}if(p)this.decodedData=y.createBuffer(p,x||0);else if(c){let r=yield c.arrayBuffer();this.decodedData=yield y.decode(r,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(r,c,p){return t(this,void 0,void 0,function*(){try{return yield this.loadAudio(r,void 0,c,p)}catch(r){throw this.emit("error",r),r}})}loadBlob(r,c,p){return t(this,void 0,void 0,function*(){try{return yield this.loadAudio("",r,c,p)}catch(r){throw this.emit("error",r),r}})}zoom(r){if(!this.decodedData)throw Error("No audio loaded");this.renderer.zoom(r),this.emit("zoom",r)}getDecodedData(){return this.decodedData}exportPeaks({channels:r=2,maxLength:c=8e3,precision:p=1e4}={}){if(!this.decodedData)throw Error("The audio has not been decoded yet");let y=Math.min(r,this.decodedData.numberOfChannels),C=[];for(let r=0;r<y;r++){let y=this.decodedData.getChannelData(r),w=[],E=y.length/c;for(let r=0;r<c;r++){let c=y.slice(Math.floor(r*E),Math.ceil((r+1)*E)),C=0;for(let r=0;r<c.length;r++){let p=c[r];Math.abs(p)>Math.abs(C)&&(C=p)}w.push(Math.round(C*p)/p)}C.push(w)}return C}getDuration(){let r=super.getDuration()||0;return(0===r||r===1/0)&&this.decodedData&&(r=this.decodedData.duration),r}toggleInteraction(r){this.options.interact=r}setTime(r){this.stopAtPosition=null,super.setTime(r),this.updateProgress(r),this.emit("timeupdate",r)}seekTo(r){let c=this.getDuration()*r;this.setTime(c)}play(r,c){let p=Object.create(null,{play:{get:()=>super.play}});return t(this,void 0,void 0,function*(){null!=r&&this.setTime(r);let y=yield p.play.call(this);return null!=c&&(this.media instanceof d?this.media.stopAt(c):this.stopAtPosition=c),y})}playPause(){return t(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(r){this.setTime(this.getCurrentTime()+r)}empty(){this.load("",[[0]],.001)}setMediaElement(r){this.unsubscribePlayerEvents(),super.setMediaElement(r),this.initPlayerEvents()}exportImage(){return t(this,arguments,void 0,function*(r="image/png",c=1,p="dataURL"){return this.renderer.exportImage(r,c,p)})}destroy(){var r;this.emit("destroy"),null===(r=this.abortController)||void 0===r||r.abort(),this.plugins.forEach(r=>r.destroy()),this.subscriptions.forEach(r=>r()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};u.BasePlugin=class extends e{constructor(r){super(),this.subscriptions=[],this.options=r}onInit(){}_init(r){this.wavesurfer=r,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(r=>r())}},u.dom=C}}]);